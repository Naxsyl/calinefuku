<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ujicoba</title>
    <link rel="stylesheet" href="product.css" />
    <link
      href="https://fonts.googleapis.com/css?family=Roboto+Condensed:300,300i,400,400i,700,700i&display=swap"
      rel="stylesheet"
    />
    <script src="https://unpkg.com/ionicons@4.5.5/dist/ionicons.js"></script>
    <script src="https://code.jquery.com/jquery-3.4.1.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/jquery-bez@1.0.11/src/jquery.bez.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/2.1.2/TweenMax.min.js"></script>
  </head>
  <body>
    <nav>
      <div class="hero-section">
        <img src="media/CalineFukuLogoWhite.png" alt="" />

        <div class="menu-btn">
          <ion-icon name="menu"></ion-icon>
        </div>
      </div>

      <div class="menu">
        <div class="close-menu">
          <ion-icon name="close"></ion-icon>
        </div>

        <div class="nav-bar">
          <ul class="main-menu">
            <li class="main-menu-item">
              <a href="#">Home</a>
            </li>

            <li class="main-menu-item">
              <a href="about.html">About</a>
            </li>

            <li class="main-menu-item">
              <a href="product.html">Our Products</a>
            </li>

            <li class="main-menu-item">
              <a href="#">Contact &nbsp; <ion-icon name="add"></ion-icon></a>

              <ul class="submenu">
                <li class="submenu-item">
                  <a href="#">Call now</a>
                </li>
                <li class="submenu-item">
                  <a href="#">Mail us</a>
                </li>
              </ul>
            </li>
          </ul>
        </div>

        <div class="contact">
          <p class="call">
            <ion-icon name="call"></ion-icon>&nbsp;&nbsp;&nbsp;+91 29000 23000
          </p>
          <p class="mail">
            <ion-icon name="mail"></ion-icon
            >&nbsp;&nbsp;&nbsp;calinefuku@gmail.com
          </p>
        </div>
      </div>
    </nav>

    <div class="slider-content">
      <div class="slide-number">
        <div class="prefix">
          <div>1</div>
          <div>2</div>
          <div>3</div>
          <div>4</div>
          <div>5</div>
        </div>
        <div class="postfix"><span>/</span> 5</div>
      </div>

      <div class="slide-name">
        <div class="names">
          <div>Ether Shift Mode</div>
          <div>Solar Thread</div>
          <div>Quantum Sheen Veil</div>
          <div>Flux Aura</div>
          <div>Echo Nimbus</div>
        </div>
      </div>

      <div class="slide-year">
        <div class="years">
          <div>2023</div>
          <div>2021</div>
          <div>2022</div>
          <div>2023</div>
          <div>2017</div>
        </div>
      </div>
    </div>
    <div class="slider">
      <div class="slide" id="slide-1">
        <img src="./media/img-1.jpg" alt="" />
      </div>
      <div class="slide" id="slide-2">
        <img src="./media/img-2.jpg" alt="" />
      </div>
      <div class="slide" id="slide-3">
        <img src="./media/img-3.jpg" alt="" />
      </div>
      <div class="slide" id="slide-4">
        <img src="./media/img-4.jpg" alt="" />
      </div>
      <div class="slide" id="slide-5">
        <img src="./media/img-5.jpg" alt="" />
      </div>
      <div style="height: 400vh"></div>
    </div>
    <script src="https://unpkg.co/gsap@3/dist/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lottie-web/5.12.2/lottie.min.js"></script>
    <script type="text/javascript">
      // Menggunakan event delegation untuk menangani semua klik pada tautan di dalam main menu
      $("ul.main-menu").on("click", "li a", function (e) {
        // Cek apakah tautan ini memiliki submenu
        var $submenu = $(this).siblings("ul.submenu");

        if ($submenu.length) {
          // Jika ada submenu, toggle (buka/tutup) submenu tersebut
          $submenu.slideToggle("normal");

          // Hentikan event click agar tidak mengarahkan ke halaman lain
          e.preventDefault();
        }
      });

      // Animasi menu menggunakan TimelineMax
      var t1 = new TimelineMax({ paused: true });

      t1.to(".menu", 0.8, {
        autoAlpha: 1,
      });

      t1.staggerFrom(
        ".main-menu li a:not(.submenu li a)",
        1,
        {
          opacity: 0,
          y: 10,
          ease: Power3.easeInOut,
        },
        0.1
      );

      t1.from(".submenu", 0.8, {
        autoAlpha: 0,
      });

      t1.staggerFrom(
        ".media ul li",
        1,
        {
          opacity: 0,
          y: 10,
          ease: Power3.easeInOut,
        },
        0.1,
        "-=2"
      );

      t1.from(".call", 1, {
        delay: -2,
        opacity: 0,
        y: 10,
        ease: Power3.easeInOut,
      });

      t1.from(".mail", 1, {
        delay: -1.6,
        opacity: 0,
        y: 10,
        ease: Power3.easeInOut,
      });

      t1.reverse();

      // Toggle menu saat tombol menu ditekan
      $(document).on("click", ".menu-btn", function () {
        t1.reversed(!t1.reversed());
      });

      // Toggle menu saat tombol close-menu ditekan
      $(document).on("click", ".close-menu", function () {
        t1.reversed(!t1.reversed());
      });
    </script>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const slides = document.querySelectorAll(".slide");
        let currentSlideIndex = 0;
        let isAnimating = false;
        let currentTopValue = 0;

        const elements = [
          { selector: ".prefix", delay: 0 },
          { selector: ".names", delay: 0.15 },
          { selector: ".years", delay: 0.3 },
        ];

        slides.forEach((slide, idx) => {
          if (idx !== 0) {
            const img = slide.querySelector("img");
            gsap.set(img, { scale: 2, top: "4em" });
          }
        });

        function showSlide(index) {
          if (isAnimating) return;
          isAnimating = true;
          const slide = slides[index];
          const img = slide.querySelector("img");

          currentTopValue -= 30;

          elements.forEach((elem) => {
            gsap.to(document.querySelector(elem.selector), {
              y: `${currentTopValue}px`,
              duration: 2,
              ease: "power4.inOut",
              delay: elem.delay,
            });
          });

          gsap.to(img, {
            scale: 1,
            top: "0%",
            duration: 2,
            ease: "power3.inOut",
          });
          gsap.to(
            slide,
            {
              clipPath: "polygon(0 0%, 100% 0%, 100% 100%, 0 100%)",
              duration: 2,
              ease: "power4.inOut",
              onComplete: () => {
                isAnimating = false;
              },
            },
            "<"
          );
        }

        function hideSlide(index) {
          if (isAnimating) return;
          isAnimating = true;
          const slide = slides[index];
          const img = slide.querySelector("img");

          currentTopValue += 30;
          elements.forEach((elem) => {
            gsap.to(document.querySelector(elem.selector), {
              y: `${currentTopValue}px`,
              duration: 2,
              ease: "power4.inOut",
              delay: elem.delay,
            });
          });

          gsap.to(slide, {
            clipPath: "polygon(0 100%, 100% 100%, 100% 100%, 0 100%)",
            duration: 2,
            ease: "power4.inOut",
          });

          gsap.to(img, {
            scale: 2,
            top: "4em",
            duration: 2,
            ease: "power3.inOut",
          });

          gsap.to(
            slide,
            {
              clipPath: "polygon(0 100%, 100% 100%, 100% 100%, 0 100%)",
              duration: 2,
              ease: "power4.inOut",
              onComplete: () => {
                isAnimating = false;
              },
            },
            "<"
          );
        }

        window.addEventListener("wheel", (e) => {
          if (isAnimating) return;
          if (e.deltaY > 0 && currentSlideIndex < slides.length - 1) {
            showSlide(currentSlideIndex + 1);
            currentSlideIndex++;
          } else if (e.deltaY < 0 && currentSlideIndex > 0) {
            hideSlide(currentSlideIndex);
            currentSlideIndex--;
          }
        });
      });
    </script>
  </body>
</html>
